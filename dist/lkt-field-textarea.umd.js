(function(e,s){typeof exports=="object"&&typeof module<"u"?module.exports=s(require("vue"),require("lkt-string-tools"),require("lkt-events")):typeof define=="function"&&define.amd?define(["vue","lkt-string-tools","lkt-events"],s):(e=typeof globalThis<"u"?globalThis:e||self,e.LktFieldTextArea=s(e.Vue,e.LktStringTools,e.LktEvents))})(this,function(e,s,d){"use strict";const C=["data-show-ui","data-labeled"],S=["for","innerHTML"],v={key:2,class:"lkt-field-text__main"},L=["value","name","id","disabled","readonly","placeholder","tabindex","autocomplete"],T=["value","name","id","disabled","readonly","tabindex","autocomplete"],N={key:2,class:"lkt-field__state"},F=["title"],K=["title"],A=["title"],R=["title"],H=["title"],I={key:3,class:"lkt-field-textarea__read"},U=["innerHTML","title"],$={key:0,class:"lkt-field__state"},q=["title"],D={name:"LktFieldTextArea",inheritAttrs:!1},j=e.defineComponent({...D,props:{modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:""},label:{type:String,default:""},palette:{type:String,default:""},name:{type:String,default:s.generateRandomString(16)},valid:{type:Boolean,default:!1},autocomplete:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},readMode:{type:Boolean,default:!1},allowReadModeSwitch:{type:Boolean,default:!1},tabindex:{type:Number,default:void 0},mandatory:{type:Boolean,default:!1},reset:{type:Boolean,default:!1},resetMessage:{type:String,default:""},mandatoryMessage:{type:String,default:""},infoMessage:{type:String,default:""},errorMessage:{type:String,default:""},switchEditionMessage:{type:String,default:""}},emits:["update:modelValue","keyup","keydown","focus","blur","click","click-info","click-error"],setup(o,{expose:z,emit:O}){const i=O,m=e.useSlots(),l=o,n=s.generateRandomString(16),u=e.ref(null),y=e.ref(l.modelValue),a=e.ref(l.modelValue),k=e.ref(!1),c=e.ref(!l.readMode),G=e.computed(()=>typeof l.valid=="function"?l.valid():l.valid),J=e.computed(()=>a.value!==y.value),h=e.computed(()=>l.reset||l.infoMessage!==""||l.errorMessage!==""),g=e.computed(()=>{let t=0;return l.reset&&++t,l.infoMessage&&++t,t}),P=e.computed(()=>l.resetMessage!==""?l.resetMessage:""),B=e.computed(()=>l.autocomplete===!0?"on":"off"),Q=e.computed(()=>a.value!==""),W=e.computed(()=>{const t=["lkt-field","lkt-field-textarea"];return l.palette&&t.push(`lkt-field--${l.palette}`),J.value&&t.push("is-changed"),l.disabled&&t.push("is-disabled"),k.value&&t.push("has-focus"),g.value>0&&t.push("has-icons",`has-icons-${g.value}`),t.push(G.value?"is-valid":"is-error"),t.push(l.modelValue?"is-filled":"is-empty"),t.join(" ")}),X=e.computed(()=>typeof a.value=="number"?a.value.toString():a.value),M=()=>{e.nextTick(()=>{u.value&&u.value.focus()})};e.watch(()=>l.readMode,t=>c.value=!t),e.watch(()=>l.modelValue,t=>{a.value=t}),e.watch(a,t=>i("update:modelValue",t));const p=()=>a.value=y.value,Y=()=>a.value,b=t=>i("keyup",t,d.createLktEvent(n,{value:a.value})),_=t=>i("keydown",t,d.createLktEvent(n,{value:a.value})),x=t=>(k.value=!0)&&i("focus",t,d.createLktEvent(n,{value:a.value})),V=t=>(k.value=!1)&&i("blur",t,d.createLktEvent(n,{value:a.value})),w=t=>i("click",t,d.createLktEvent(n,{value:a.value})),Z=t=>i("click-info",t,d.createLktEvent(n,{value:a.value})),ee=t=>i("click-error",t,d.createLktEvent(n,{value:a.value})),E=t=>{c.value=!c.value,c.value&&M()};return z({Identifier:n,reset:p,focus:M,value:Y,isMandatory:()=>l.mandatory}),p(),(t,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(W.value),"data-show-ui":h.value,"data-labeled":!e.unref(m).label},[e.unref(m).label?e.renderSlot(t.$slots,"label",{key:0}):e.createCommentVNode("",!0),e.unref(m).label?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("label",{key:1,for:e.unref(n),innerHTML:o.label},null,8,S)),c.value?(e.openBlock(),e.createElementBlock("div",v,[o.placeholder?e.withDirectives((e.openBlock(),e.createElementBlock("textarea",{key:0,"onUpdate:modelValue":f[0]||(f[0]=r=>a.value=r),ref:r=>u.value=r,value:a.value,name:o.name,id:e.unref(n),disabled:o.disabled,readonly:o.readonly,placeholder:o.placeholder,tabindex:o.tabindex,autocomplete:B.value,onKeyup:b,onKeydown:_,onFocus:x,onBlur:V,onClick:w},null,40,L)),[[e.vModelText,a.value]]):e.withDirectives((e.openBlock(),e.createElementBlock("textarea",{key:1,"onUpdate:modelValue":f[1]||(f[1]=r=>a.value=r),ref:r=>u.value=r,value:a.value,name:o.name,id:e.unref(n),disabled:o.disabled,readonly:o.readonly,tabindex:o.tabindex,autocomplete:B.value,onKeyup:b,onKeydown:_,onFocus:x,onBlur:V,onClick:w},`\r
                    `,40,T)),[[e.vModelText,a.value]]),h.value?(e.openBlock(),e.createElementBlock("div",N,[l.errorMessage?(e.openBlock(),e.createElementBlock("i",{key:0,class:"lkt-field__error-icon",title:l.errorMessage,onClick:ee},null,8,F)):e.createCommentVNode("",!0),l.infoMessage?(e.openBlock(),e.createElementBlock("i",{key:1,class:"lkt-field__info-icon",title:l.infoMessage,onClick:Z},null,8,K)):e.createCommentVNode("",!0),l.reset&&Q.value?(e.openBlock(),e.createElementBlock("i",{key:2,class:"lkt-field__reset-icon",title:P.value,onClick:p},null,8,A)):e.createCommentVNode("",!0),l.mandatory?(e.openBlock(),e.createElementBlock("i",{key:3,class:"lkt-field__mandatory-icon",title:l.mandatoryMessage},null,8,R)):e.createCommentVNode("",!0),o.allowReadModeSwitch?(e.openBlock(),e.createElementBlock("i",{key:4,class:"lkt-field__edit-icon",title:l.switchEditionMessage,onClick:E},null,8,H)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0),c.value?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("div",I,[e.createElementVNode("div",{class:"lkt-field-textarea__read-value",innerHTML:a.value,title:X.value},null,8,U),o.allowReadModeSwitch?(e.openBlock(),e.createElementBlock("div",$,[e.createElementVNode("i",{class:"lkt-field__edit-icon",title:l.switchEditionMessage,onClick:E},null,8,q)])):e.createCommentVNode("",!0)]))],10,C))}}),te="";return{install:o=>{o.component("lkt-field-textarea")===void 0&&o.component("lkt-field-textarea",j)}}});
